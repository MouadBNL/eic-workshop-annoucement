<template>
  <NConfigProvider :theme="darkTheme" :theme-overrides="themeOverride">
    <div class="antialiased">
      <main class="h-screen flex">
        <section class="flex-1 bg-gray-dark text-white overflow-auto border-r-8 border-primary font-poppins">
          <header class="bg-primary bg-opacity-10 px-8 py-4">
            <h1 class="text-4xl font-bold">EIC Annoucement Generator</h1>
            <small>By Benali Mouad</small>
          </header>

          <div class="p-8 mb-8">
            <div class="flex items-center justify-between mb-8">
              <h2 class="text-2xl font-semibold">Weekly workshop details :</h2>

              <NButton type="primary" @click="generate">Download</NButton>
            </div>
            <n-input placeholder="week 5" class="mb-8" type="text" v-model:value="weekNumber" />

            <n-dynamic-input v-model:value="workshops" :on-create="onAddWorkshop" :min="1" :max="4">

              <template #default="{ value, index }">
                <div class="mb-6 w-full">
                  <h4 class="text-lg font-medium mb-2">Formation N {{ index + 1 }}</h4>
                  <div class="grid grid-cols-1 gap-2">
                    <n-input v-model:value="value.icon" type="text" placeholder="Icon svg" />
                    <n-input v-model:value="value.date" type="text" placeholder="Date & Location" />
                    <n-input v-model:value="value.title" type="text" placeholder="Title" />
                  </div>
                </div>
              </template>
            </n-dynamic-input>
          </div>

        </section>

        <section class="max-h-screen overflow-auto">
          <div id="generated" class="m-auto bg-gray-dark relative flex flex-col -z-50 font-poppins"
            style="height: 1080px; width: 1080px;">
            <div class="h-20 flex items-center justify-between px-14 bg-primary z-20 w-full">
              <div>
                <svg width="80" height="39" viewBox="0 0 80 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M18.2226 0.898278C17.9536 0.347754 17.4038 0 16.8024 0L1.58783 0C0.710895 0 0 0.727537 0 1.625L0 8.125C0 9.02246 0.710895 9.75 1.58783 9.75L19.978 9.75C21.1584 9.75 21.9261 8.47874 21.3982 7.39828L18.2226 0.898278Z"
                    fill="white" />
                  <path
                    d="M24.2563 15.5233C23.9873 14.9728 23.4375 14.625 22.8361 14.625L1.58783 14.625C0.710896 14.625 0 15.3525 0 16.25L0 22.75C0 23.6475 0.710896 24.375 1.58783 24.375L26.0118 24.375C27.1921 24.375 27.9598 23.1037 27.432 22.0233L24.2563 15.5233Z"
                    fill="white" />
                  <path
                    d="M0 30.875C0 29.9775 0.710895 29.25 1.58783 29.25L29.9821 29.25C30.5831 29.25 31.1326 29.5973 31.4018 30.1472L34.5831 36.6472C35.1119 37.7278 34.3443 39 33.1634 39L1.58783 39C0.710895 39 0 38.2725 0 37.375L0 30.875Z"
                    fill="white" />
                  <path
                    d="M35.2917 0.898278C35.0228 0.347754 34.4729 0 33.8715 0L27.4981 0C26.3177 0 25.55 1.27126 26.0779 2.35172L29.2535 8.85172C29.5225 9.40225 30.0723 9.75 30.6737 9.75H37.0472C38.2275 9.75 38.9952 8.47874 38.4674 7.39828L35.2917 0.898278Z"
                    fill="white" />
                  <path
                    d="M60.6926 2.35172C60.1647 1.27126 60.9324 0 62.1128 0L78.4101 0C79.5905 0 80.3582 1.27126 79.8303 2.35172L76.6547 8.85172C76.3857 9.40225 75.8359 9.75 75.2345 9.75L65.2884 9.75C64.687 9.75 64.1372 9.40225 63.8682 8.85172L60.6926 2.35172Z"
                    fill="white" />
                  <path
                    d="M61.6438 39C61.0385 39 60.4859 38.6479 60.2188 38.092L43.0532 2.36158C42.5322 1.27703 43.3091 0.0106194 44.49 0.0196381L51.5794 0.0737828C52.179 0.0783617 52.7249 0.428152 52.9907 0.978103L66.2219 28.3456C66.4897 28.8995 67.0413 29.25 67.6451 29.25H75.1551C75.7565 29.25 76.3063 29.5978 76.5753 30.1483L79.7509 36.6483C80.2788 37.7287 79.5111 39 78.3307 39L61.6438 39Z"
                    fill="white" />
                  <path
                    d="M32.1116 16.9767C31.5838 15.8963 32.3515 14.625 33.5318 14.625L40.6992 14.625C41.3006 14.625 41.8504 14.9728 42.1194 15.5233L52.4403 36.6483C52.9681 37.7287 52.2004 39 51.0201 39H43.8527C43.2513 39 42.7015 38.6522 42.4325 38.1017L32.1116 16.9767Z"
                    fill="white" />
                </svg>
              </div>

              <h2 class="text-4xl font-extrabold text-white">
                {{ weekNumber }}
              </h2>
            </div>

            <div class="flex-1 flex items-center justify-center">
              <div class="flex flex-col items-center gap-8">

                <WorkshopCard v-for="(workshop, idx) in workshops" :key="idx" :data="workshop" />


              </div>
            </div>


            <div class="absolute inset-0 overflow-hidden flex items-center justify-center -z-40">

              <div style="width: 1708px; height: 1104px;">
                <svg width="1080" height="1080" viewBox="0 0 1080 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path opacity="0.3"
                    d="M219.23 207.872C219.23 215.418 214.981 222.312 208.259 225.684L120.887 269.508C107.703 276.121 92.1728 266.508 92.1728 251.697L92.1728 -2.08796C92.1728 -13.091 101.063 -22 112.016 -22L199.388 -22C210.341 -22 219.23 -13.091 219.23 -2.08796L219.23 207.872ZM22.644 291.138C22.644 298.684 18.3943 305.578 11.6728 308.949L-75.699 352.773C-88.8832 359.386 -104.414 349.774 -104.414 334.962L-104.414 -2.08796C-104.414 -13.091 -95.5237 -22 -84.5708 -22L2.80103 -22C13.754 -22 22.644 -13.091 22.644 -2.08796L22.644 291.138ZM-193.785 -22C-182.832 -22 -173.943 -13.0911 -173.943 -2.08798L-173.943 389.753C-173.943 397.294 -178.187 404.184 -184.901 407.558L-272.273 451.46C-285.458 458.085 -301 448.473 -301 433.655L-301 -2.08798C-301 -13.0911 -292.11 -22 -281.157 -22L-193.785 -22ZM219.23 443.427C219.23 450.972 214.981 457.867 208.259 461.238L120.887 505.062C107.703 511.675 92.1728 502.063 92.1728 487.251L92.1728 399.298C92.1728 391.752 96.4224 384.858 103.144 381.487L190.516 337.663C203.7 331.05 219.23 340.662 219.23 355.474L219.23 443.427ZM190.516 815.345C203.7 808.732 219.23 818.344 219.23 833.156L219.23 1058.06C219.23 1072.87 203.7 1082.48 190.516 1075.87L103.144 1032.05C96.4224 1028.68 92.1728 1021.78 92.1728 1014.24L92.1728 876.98C92.1728 869.435 96.4224 862.541 103.144 859.169L190.516 815.345ZM-301 826.684C-301 819.09 -296.697 812.161 -289.91 808.814L190.371 571.928C203.605 565.401 219.077 575.129 218.967 589.947L218.239 687.781C218.183 695.303 213.908 702.148 207.194 705.481L-160.675 888.071C-168.803 892.105 -173.943 900.412 -173.943 909.502L-173.943 1013.14C-173.943 1020.69 -178.192 1027.58 -184.914 1030.95L-272.286 1074.78C-285.47 1081.39 -301 1071.78 -301 1056.96L-301 826.684ZM-6.07077 420.928C7.1134 414.315 22.6439 423.928 22.6439 438.739L22.6439 537.649C22.6439 545.194 18.3943 552.088 11.6728 555.46L-272.286 697.888C-285.47 704.501 -301 694.889 -301 680.077L-301 581.168C-301 573.622 -296.751 566.728 -290.029 563.356L-6.07077 420.928Z"
                    stroke="#5A27EE" stroke-width="4" />
                  <path opacity="0.3"
                    d="M290.961 1058.09L290.961 848.128C290.961 840.582 295.211 833.688 301.932 830.316L389.304 786.492C402.488 779.879 418.019 789.492 418.019 804.303L418.019 1058.09C418.019 1069.09 409.129 1078 398.176 1078L310.804 1078C299.851 1078 290.961 1069.09 290.961 1058.09ZM487.547 1058.09L487.547 764.862C487.547 757.316 491.797 750.422 498.519 747.051L585.89 703.227C599.075 696.614 614.605 706.226 614.605 721.038L614.605 1058.09C614.605 1069.09 605.715 1078 594.762 1078L507.39 1078C496.437 1078 487.547 1069.09 487.547 1058.09ZM684.134 1058.09L684.134 666.247C684.134 658.706 688.378 651.816 695.093 648.442L782.464 604.54C795.649 597.915 811.192 607.527 811.192 622.345L811.192 1058.09C811.192 1069.09 802.302 1078 791.349 1078L703.977 1078C693.024 1078 684.134 1069.09 684.134 1058.09ZM290.961 700.526L290.961 612.573C290.961 605.028 295.211 598.133 301.932 594.762L389.304 550.938C402.488 544.325 418.019 553.937 418.019 568.749L418.019 656.702C418.019 664.248 413.769 671.142 407.047 674.513L319.676 718.337C306.491 724.95 290.961 715.338 290.961 700.526ZM290.961 222.844L290.961 -2.05981C290.961 -16.8713 306.491 -26.4838 319.676 -19.8708L407.047 23.9532C413.769 27.3247 418.019 34.2189 418.019 41.7643L418.019 179.02C418.019 186.565 413.769 193.459 407.047 196.831L319.676 240.655C306.491 247.268 290.961 237.656 290.961 222.844ZM800.102 247.186L319.82 484.072C306.586 490.599 291.115 480.871 291.225 466.053L291.953 368.219C292.009 360.697 296.283 353.852 302.998 350.519L670.867 167.929C678.994 163.895 684.134 155.588 684.134 146.498L684.134 42.8599C684.134 35.3145 688.384 28.4203 695.105 25.0488L782.477 -18.7751C795.661 -25.3882 811.192 -15.7758 811.192 -0.964227L811.192 229.316C811.192 236.91 806.888 243.839 800.102 247.186ZM487.547 617.261L487.547 518.351C487.547 510.806 491.797 503.912 498.519 500.54L782.477 358.112C795.661 351.499 811.192 361.111 811.192 375.923L811.192 474.832C811.192 482.378 806.942 489.272 800.22 492.643L516.262 635.072C503.078 641.685 487.547 632.072 487.547 617.261Z"
                    stroke="#5A27EE" stroke-width="4" />
                  <path opacity="0.3"
                    d="M1403.15 -2.08796L1403.15 207.872C1403.15 215.418 1398.9 222.312 1392.18 225.684L1304.81 269.508C1291.63 276.121 1276.09 266.508 1276.09 251.697L1276.09 -2.08796C1276.09 -13.091 1284.98 -22 1295.94 -22L1383.31 -22C1394.26 -22 1403.15 -13.091 1403.15 -2.08796ZM1206.57 -2.08796L1206.57 291.138C1206.57 298.684 1202.32 305.578 1195.59 308.949L1108.22 352.773C1095.04 359.386 1079.51 349.774 1079.51 334.962L1079.51 -2.08796C1079.51 -13.091 1088.4 -22 1099.35 -22L1186.72 -22C1197.68 -22 1206.57 -13.091 1206.57 -2.08796ZM1009.98 -2.08798L1009.98 389.753C1009.98 397.294 1005.74 404.184 999.021 407.558L911.649 451.46C898.464 458.085 882.922 448.473 882.922 433.655L882.922 -2.08798C882.922 -13.0911 891.812 -22 902.765 -22L990.136 -22C1001.09 -22 1009.98 -13.0911 1009.98 -2.08798ZM1403.15 355.474L1403.15 443.427C1403.15 450.972 1398.9 457.867 1392.18 461.238L1304.81 505.062C1291.63 511.675 1276.09 502.063 1276.09 487.251L1276.09 399.298C1276.09 391.752 1280.34 384.858 1287.07 381.487L1374.44 337.663C1387.62 331.05 1403.15 340.662 1403.15 355.474ZM1403.15 833.156L1403.15 1058.06C1403.15 1072.87 1387.62 1082.48 1374.44 1075.87L1287.07 1032.05C1280.34 1028.68 1276.09 1021.78 1276.09 1014.24L1276.09 876.98C1276.09 869.435 1280.34 862.541 1287.07 859.169L1374.44 815.345C1387.62 808.732 1403.15 818.344 1403.15 833.156ZM894.012 808.814L1374.29 571.928C1387.53 565.401 1403 575.129 1402.89 589.947L1402.16 687.781C1402.1 695.303 1397.83 702.148 1391.12 705.481L1023.25 888.071C1015.12 892.105 1009.98 900.412 1009.98 909.502L1009.98 1013.14C1009.98 1020.69 1005.73 1027.58 999.008 1030.95L911.636 1074.78C898.452 1081.39 882.922 1071.78 882.922 1056.96L882.922 826.684C882.922 819.09 887.225 812.161 894.012 808.814ZM1206.57 438.739L1206.57 537.649C1206.57 545.194 1202.32 552.088 1195.59 555.46L911.636 697.888C898.452 704.501 882.922 694.889 882.922 680.077L882.922 581.168C882.922 573.622 887.171 566.728 893.893 563.356L1177.85 420.928C1191.04 414.315 1206.57 423.928 1206.57 438.739Z"
                    stroke="#5A27EE" stroke-width="4" />
                </svg>
              </div>
            </div>
          </div>
        </section>

      </main>

    </div>
  </NConfigProvider>
</template>

<script setup lang="ts">
import { darkTheme } from 'naive-ui'
import { onMounted, ref } from 'vue'
import WorkshopCard from './components/WorkshopCard.vue'
import html2canvas from 'html2canvas'
import { NButton, NConfigProvider, NDynamicInput, NInput } from 'naive-ui'

const themeOverride = {
  "common": {
    "primaryColor": "#7D55F4FF",
    "primaryColorHover": "#7B4FFEFF",
    "primaryColorPressed": "#865CFFFF",
    "primaryColorSuppl": "#511DE8FF",
    "baseColor": "#000000FF"
  }
}

const weekNumber = ref('Week 1')
const workshops = ref([
  {
    icon: '<svg width="110" height="91" viewBox="0 0 110 91" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M56.9966 50.6701C57.2012 47.0056 58.9846 43.7676 61.6866 41.4797C64.3308 39.2306 67.8821 37.854 71.7808 37.854C75.6602 37.854 79.2115 39.2287 81.8557 41.4797C84.5578 43.7676 86.3334 47.0056 86.5457 50.6701C86.7503 54.4316 85.2429 57.941 82.6084 60.5391C79.9063 63.176 76.0848 64.8435 71.7808 64.8435C67.4768 64.8435 63.636 63.1876 60.9532 60.5391C58.3091 57.941 56.8036 54.451 57.0159 50.6895L56.9966 50.6701Z" fill="white" /> <path d="M33.8356 58.4259C33.8607 59.8607 34.3162 62.6527 34.9994 64.8243C36.4354 69.4389 38.8788 73.7045 42.2564 77.4466C45.7305 81.305 50.0152 84.4072 54.9561 86.6176C60.148 88.9249 65.7837 90.1076 71.6318 90.1076C77.4798 90.0998 83.1156 88.8977 88.3074 86.5594C93.2483 84.3297 97.5331 81.2274 101.007 77.3496C104.404 73.5688 106.836 69.3032 108.264 64.6886C108.988 62.3619 109.445 59.9964 109.629 57.631C109.808 55.3043 109.733 52.9583 109.403 50.6122C108.758 46.0558 107.183 41.7708 104.771 37.893C102.57 34.306 99.714 31.1844 96.3171 28.5475L96.3249 28.5417L62.1629 2.17264C62.1321 2.14937 62.107 2.12414 62.0742 2.10281C59.8353 0.373316 56.0524 0.379142 53.6012 2.11252C51.1115 3.86528 50.822 6.76587 53.0415 8.58844L53.0319 8.59814L67.2949 20.2509L23.8688 20.2975H23.8109C20.221 20.3013 16.7662 22.663 16.0907 25.6682C15.3882 28.7123 17.8277 31.2522 21.572 31.2522L21.5663 31.2658L43.5688 31.2232L4.19581 61.47C4.14562 61.5069 4.09158 61.5456 4.04526 61.5825C0.339559 64.4326 -0.857077 69.183 1.47829 72.1689C3.85225 75.213 8.88968 75.2323 12.634 72.1863L34.0576 54.5423C34.0576 54.5423 33.7449 56.9272 33.77 58.3426L33.8356 58.4259ZM89.0351 66.3948C84.6152 70.9124 78.4198 73.4912 71.7418 73.4912C65.0445 73.5028 58.849 70.9707 54.4292 66.453C52.2676 64.2427 50.6849 61.7221 49.7006 59.027C48.7414 56.3707 48.3689 53.5593 48.6159 50.7285C48.8495 47.9559 49.6717 45.2996 50.9899 42.9147C52.2792 40.5687 54.0587 38.4359 56.2396 36.6327C60.5436 33.1233 66.0057 31.2038 71.7186 31.2038C77.4509 31.196 82.9129 33.0826 87.2169 36.5939C89.3979 38.3855 91.1735 40.5105 92.4667 42.8566C93.7849 45.2414 94.609 47.8783 94.8406 50.6703C95.0838 53.5011 94.7113 56.3125 93.7521 58.9688C92.7716 61.6833 91.1851 64.2039 89.0235 66.4142L89.0351 66.3948Z" fill="white" /> </svg>',
    date: 'Lundi - JJ/MM/YYYY - 13h - B18',
    title: 'Titre de la formation'
  }
])

const onAddWorkshop = () => {
  return {
    icon: '<svg width="110" height="91" viewBox="0 0 110 91" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M56.9966 50.6701C57.2012 47.0056 58.9846 43.7676 61.6866 41.4797C64.3308 39.2306 67.8821 37.854 71.7808 37.854C75.6602 37.854 79.2115 39.2287 81.8557 41.4797C84.5578 43.7676 86.3334 47.0056 86.5457 50.6701C86.7503 54.4316 85.2429 57.941 82.6084 60.5391C79.9063 63.176 76.0848 64.8435 71.7808 64.8435C67.4768 64.8435 63.636 63.1876 60.9532 60.5391C58.3091 57.941 56.8036 54.451 57.0159 50.6895L56.9966 50.6701Z" fill="white" /> <path d="M33.8356 58.4259C33.8607 59.8607 34.3162 62.6527 34.9994 64.8243C36.4354 69.4389 38.8788 73.7045 42.2564 77.4466C45.7305 81.305 50.0152 84.4072 54.9561 86.6176C60.148 88.9249 65.7837 90.1076 71.6318 90.1076C77.4798 90.0998 83.1156 88.8977 88.3074 86.5594C93.2483 84.3297 97.5331 81.2274 101.007 77.3496C104.404 73.5688 106.836 69.3032 108.264 64.6886C108.988 62.3619 109.445 59.9964 109.629 57.631C109.808 55.3043 109.733 52.9583 109.403 50.6122C108.758 46.0558 107.183 41.7708 104.771 37.893C102.57 34.306 99.714 31.1844 96.3171 28.5475L96.3249 28.5417L62.1629 2.17264C62.1321 2.14937 62.107 2.12414 62.0742 2.10281C59.8353 0.373316 56.0524 0.379142 53.6012 2.11252C51.1115 3.86528 50.822 6.76587 53.0415 8.58844L53.0319 8.59814L67.2949 20.2509L23.8688 20.2975H23.8109C20.221 20.3013 16.7662 22.663 16.0907 25.6682C15.3882 28.7123 17.8277 31.2522 21.572 31.2522L21.5663 31.2658L43.5688 31.2232L4.19581 61.47C4.14562 61.5069 4.09158 61.5456 4.04526 61.5825C0.339559 64.4326 -0.857077 69.183 1.47829 72.1689C3.85225 75.213 8.88968 75.2323 12.634 72.1863L34.0576 54.5423C34.0576 54.5423 33.7449 56.9272 33.77 58.3426L33.8356 58.4259ZM89.0351 66.3948C84.6152 70.9124 78.4198 73.4912 71.7418 73.4912C65.0445 73.5028 58.849 70.9707 54.4292 66.453C52.2676 64.2427 50.6849 61.7221 49.7006 59.027C48.7414 56.3707 48.3689 53.5593 48.6159 50.7285C48.8495 47.9559 49.6717 45.2996 50.9899 42.9147C52.2792 40.5687 54.0587 38.4359 56.2396 36.6327C60.5436 33.1233 66.0057 31.2038 71.7186 31.2038C77.4509 31.196 82.9129 33.0826 87.2169 36.5939C89.3979 38.3855 91.1735 40.5105 92.4667 42.8566C93.7849 45.2414 94.609 47.8783 94.8406 50.6703C95.0838 53.5011 94.7113 56.3125 93.7521 58.9688C92.7716 61.6833 91.1851 64.2039 89.0235 66.4142L89.0351 66.3948Z" fill="white" /> </svg>',
    date: 'Lundi - JJ/MM/YYYY - 13h - B18',
    title: 'Titre de la formation'
  }
}

const generate = () => {
  html2canvas(
    document.getElementById('generated') as HTMLElement,
    {
      width: 1080,
      height: 1080
    }
  ).then((canvas) => {
    // document.getElementById('display')?.append(canvas)

    let link = document.createElement('a')
    link.download = 'week6.png'
    link.href = canvas.toDataURL()
    link.target = '_blank'
    link.click()
  })
}
</script>

<style scoped>

</style>
